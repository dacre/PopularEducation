#!/usr/bin/python
# -*- coding: UTF-8 -*-

# this gets all events including dates of open seminars at Stockholm University
import json
import requests
import urllib.request as request
from bs4 import BeautifulSoup
import datetime, time
import locale

test = False


def get_likely_year(formatted_date):
    current_month = datetime.date.today().month
    current_year = datetime.date.today().year
    if formatted_date.month < current_month:
        return current_year + 1
    else:
        return current_year


def make_request():
    import requests

    headers = {
        'Connection': 'keep-alive',
        'Pragma': 'no-cache',
        'Cache-Control': 'no-cache',
        'Accept': 'application/json, text/plain, */*',
        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36',
        'Content-Type': 'application/json;charset=UTF-8',
        'Origin': 'http://abfstockholm.se',
        'Referer': 'http://abfstockholm.se/evenemang/',
        'Accept-Language': 'sv-SE,sv;q=0.9,en-US;q=0.8,en;q=0.7,da;q=0.6',
    }

    data = '{"filters":{"category":[47,75]},"per_page":1000,"page":1}'

    return (requests.post('http://abfstockholm.se/wp-json/abf/search/events', headers=headers,
                          data=data, verify=False))


def get_events():
    events = []
    if not test:
        response = make_request()
        json_data = json.loads(response.text, strict=False)
    else:
        response = get_weird_json()
        json_data = json.loads(response, strict=False)
    inner_html = json_data['posts']
    new_soup = BeautifulSoup(inner_html, 'html.parser')
    for row in new_soup:
        possible_end_tag = row.find(text='Inget hittat.')
        if possible_end_tag is not None:
            continue
        else:
            title = ''
            description = ''
            location = ''
            link = ''
            titles = row.findAll(lambda tag: tag.name == 'a' and tag['class'] == ['open-modal'])
            for title_found in titles:
                if title_found != '':
                    title = title_found.text.strip()
                    continue
            try:
                link = row.find(lambda tag: tag.name == 'a' and tag['href'] is not None).attrs['href']
            except AttributeError as ae:
                if test: print("no link found")
            try:
                description = row.find(lambda tag: tag.name == 'div' and tag['class'] == ['desc']).text.strip()
            except AttributeError as ae:
                if test: print("no description found ")
            try:
                location = row.find(lambda tag: tag.name == 'span' and tag['class'] == ['location']).text.strip()
            except AttributeError as ae:
                if test: print("no location found ")
            try:
                price_information = row.find(lambda tag: tag.name == 'span' and tag['class'] == ['price'])
                if price_information is None:
                    price = ""
                else:
                    price = price_information.text.strip()
            except AttributeError as ae:
                if test: print("no price found ")
            try:
                date_strings = row.find(lambda tag: tag.name == 'time')
                locale.setlocale(locale.LC_ALL, "sv_SE")
                date_string_list = date_strings.text.split('\n', 99)
                for date in date_string_list:
                    if date != '' and date.strip() != "[...]":
                        date_no_whitespace_on_either_side = date.strip()
                        try:
                            if len(date_no_whitespace_on_either_side) > 45:
                                date_no_multiple_spaces = " ".join(date_no_whitespace_on_either_side.split())
                                formatted_date = datetime.datetime.strptime(date_no_multiple_spaces, '%d/%m %Y %H:%M')
                            elif len(date_no_whitespace_on_either_side) > 40:
                                date_no_multiple_spaces = " ".join(date_no_whitespace_on_either_side.split())
                                formatted_date = datetime.datetime.strptime(date_no_multiple_spaces, '%d/%m %H:%M')
                                year = get_likely_year(formatted_date)
                                formatted_date = formatted_date.replace(year=year)
                            elif len(date_no_whitespace_on_either_side) > 8:
                                formatted_date = datetime.datetime.strptime(date_no_whitespace_on_either_side,
                                                                            '%d/%m/%Y %H:%M')
                            elif len(date_no_whitespace_on_either_side) > 5:
                                formatted_date = datetime.datetime.strptime(date_no_whitespace_on_either_side,
                                                                            '%d/%m/%Y')
                            else:
                                formatted_date = ""
                            seminar = {
                                "date": formatted_date.date(),
                                "starting_time": formatted_date.time(),
                                "title": title,
                                "description": description,
                                "link": link,
                                "location": location
                            }
                            events.append(seminar)
                        except ValueError as ve:
                            print("date date could not be handled: " + date_no_whitespace_on_either_side)
            except AttributeError as ae:
                if test:
                    print("no date found ")
    return events


def get_weird_json():
    return r"""{"_query_args":{"post_status":"publish","paged":1,"post_type":["evenemang"]},"success":true,"results":"<article class=\"card post-9624 type-evenemang status-publish hentry evenemang_kategori-forelasning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          F\u00f6rel\u00e4sning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/forelasning-om-polsk-opera\/\" data-post-id=\"9624\" class=\"open-modal\">\n            F\u00f6rel\u00e4sning om polsk opera          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>En kort \u00f6versikt \u00f6ver den polska operahistorien. Framf\u00f6r allt tas det upp verk av Stanis\u0142aw Moniuszko (i \u00e5r firas 200-\u00e5rsminnet&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          16\/03\/2019 11:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            ABF-huset, Sveav\u00e4gen 41          <\/span>\n        \n                  <span class=\"price\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            Fri entr\u00e9\n          <\/span>\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/forelasning-om-polsk-opera\/\" data-post-id=\"9624\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-10002 type-evenemang status-publish hentry evenemang_kategori-forestallning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          F\u00f6rest\u00e4llning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/vi-som-drommer\/\" data-post-id=\"10002\" class=\"open-modal\">\n            Vi som dr\u00f6mmer          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>M\u00f6t unga talanger med stora dr\u00f6mmar p\u00e5 J\u00e4rva Folkets Park. Eftermiddagen inleds med ett panelsamtal med ungdomar som vill f\u00f6r\u00e4ndra&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          16\/03\/2019 14:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            J\u00e4rva Folkets park, Eggeby g\u00e5rd          <\/span>\n        \n                  <span class=\"price\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            Fri entr\u00e9\n          <\/span>\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/vi-som-drommer\/\" data-post-id=\"10002\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-10217 type-evenemang status-publish hentry evenemang_kategori-forelasning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          F\u00f6rel\u00e4sning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/kollektivavtalets-dag-ur-ett-europeiskt-perspektiv\/\" data-post-id=\"10217\" class=\"open-modal\">\n            Kollektivavtalets dag &#8211; ur ett europeiskt perspektiv          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>De svenska kollektivavtalen diskuteras ur ett europeiskt perspektiv inf\u00f6r kommande val till Europaparlamentet. M\u00f6tet avslutas med en paneldebatt. Medverkande: Magnus&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          17\/03\/2019 13:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            ABF-huset, Sveav\u00e4gen 41          <\/span>\n        \n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/kollektivavtalets-dag-ur-ett-europeiskt-perspektiv\/\" data-post-id=\"10217\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-9588 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-stadsvandring\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/Mina-dr\u00f6mmars-stad-600x398.jpg'); padding-top: 66.333333333333%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/Mina-dr\u00f6mmars-stad.jpg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/mina-drommars-stad-2\/\" data-post-id=\"9588\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          Stadsvandring        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/mina-drommars-stad-2\/\" data-post-id=\"9588\" class=\"open-modal\">\n            Mina dr\u00f6mmars stad          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>En vandring till klassiska platser i Per Anders Fogelstr\u00f6ms Stockholmsromaner i kulturreservaten kring Vita bergen. Vandringen kostar 120kr och betalas&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          17\/03\/2019 13:00                <br>\n                                                        24\/03\/2019 13:00                <br>\n                                                        31\/03\/2019 13:00                <br>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          [...]          <\/time>\n        \n        \n                  <span class=\"price\" itemprop=\"price\" content=\"120.00\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            120 kr\n          <\/span>\n          <meta itemprop=\"priceCurrency\" content=\"SEK\">\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/mina-drommars-stad-2\/\" data-post-id=\"9588\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-9678 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-stadsvandring\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/18-Mars-600x450.jpg'); padding-top: 75%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/18-Mars.jpg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/slakthusomradet-igar-idag-och-i-morgon\/\" data-post-id=\"9678\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          Stadsvandring        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/slakthusomradet-igar-idag-och-i-morgon\/\" data-post-id=\"9678\" class=\"open-modal\">\n            Slakthusomr\u00e5det ig\u00e5r, idag och i morgon          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>Anders Djerf ber\u00e4ttar om genomt\u00e4nkt arbetsprocess p\u00e5 slakthusomr\u00e5det, st\u00f6rst i Europa. K-m\u00e4rkta hus kommer att bevaras, som Hallv\u00e4gen 21 fr\u00e5n&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          18\/03\/2019 13:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            Slakthusplan 3, vid stora portalen          <\/span>\n        \n                  <span class=\"price\" itemprop=\"price\" content=\"100.00\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            100 kr\n          <\/span>\n          <meta itemprop=\"priceCurrency\" content=\"SEK\">\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/slakthusomradet-igar-idag-och-i-morgon\/\" data-post-id=\"9678\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-9319 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-forelasning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/01\/Atelje_Jaeger_-_Selma_Lagerlo\u0308f_1928-600x845.jpeg'); padding-top: 140.83333333333%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/01\/Atelje_Jaeger_-_Selma_Lagerlo\u0308f_1928.jpeg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/anna-nordlund-om-selma-lagerlof\/\" data-post-id=\"9319\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          F\u00f6rel\u00e4sning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/anna-nordlund-om-selma-lagerlof\/\" data-post-id=\"9319\" class=\"open-modal\">\n            Anna Nordlund om Selma Lagerl\u00f6f          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>Anna Nordlund har skrivit den st\u00f6rsta och mest bildrika biografin \u00f6ver Selma Lagerl\u00f6f som n\u00e5gon\u00adsin har getts ut. P\u00e5 ett&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          18\/03\/2019 14:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            ABF-huset, Sveav\u00e4gen 41          <\/span>\n        \n                  <span class=\"price\" itemprop=\"price\" content=\"70.00\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            70 kr\n          <\/span>\n          <meta itemprop=\"priceCurrency\" content=\"SEK\">\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/anna-nordlund-om-selma-lagerlof\/\" data-post-id=\"9319\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n              <a href=\"https:\/\/billetto.se\/e\/anna-nordlund-om-selma-lagerlof-biljetter-332432\" class=\"sign-up\" target=\"_blank\">Anm\u00e4l Dig<\/a>\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-9350 type-evenemang status-publish hentry evenemang_kategori-filosofikafe\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          Filosofikaf\u00e9        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/filosofikafe-farsta-bibliotek\/\" data-post-id=\"9350\" class=\"open-modal\">\n            Filosofikaf\u00e9: Farsta bibliotek          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>21 januari &#8211; natur och kultur Vad \u00e4r skillnaden mellan natur och kultur idag? Finns det n\u00e5gra milj\u00f6er i v\u00e5r&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          18\/03\/2019 18:00                <br>\n                                                        29\/04\/2019 18:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            Farsta bibliotek          <\/span>\n        \n                  <span class=\"price\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            Fri entr\u00e9\n          <\/span>\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/filosofikafe-farsta-bibliotek\/\" data-post-id=\"9350\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-10071 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-forelasning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/03\/190319_Arbetare-600x429.jpg'); padding-top: 71.5%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/03\/190319_Arbetare.jpg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/arbetarfamiljer-i-1910-talets-stockholm-2\/\" data-post-id=\"10071\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          F\u00f6rel\u00e4sning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/arbetarfamiljer-i-1910-talets-stockholm-2\/\" data-post-id=\"10071\" class=\"open-modal\">\n            Arbetarfamiljer i 1910-talets Stockholm          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>Anne-Marie Lindgren f\u00f6rel\u00e4ser utifr\u00e5n texter av Maria Sandel om stockholmsfamiljer, sv\u00e4lt och umb\u00e4randen. Men ocks\u00e5 om hur arbetarna organiserade sig&#8230;.<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          19\/03\/2019 17:30                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            ABF-huset, Sveav\u00e4gen 41          <\/span>\n        \n                  <span class=\"price\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            Fri entr\u00e9\n          <\/span>\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/arbetarfamiljer-i-1910-talets-stockholm-2\/\" data-post-id=\"10071\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-9772 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-forelasning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/19-Mars-EUs-interna-utmaningar-600x313.jpg'); padding-top: 52.166666666667%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/19-Mars-EUs-interna-utmaningar.jpg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/statsvetare-pratar-politik-eus-interna-utmaningar\/\" data-post-id=\"9772\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          F\u00f6rel\u00e4sning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/statsvetare-pratar-politik-eus-interna-utmaningar\/\" data-post-id=\"9772\" class=\"open-modal\">\n            Statsvetare pratar politik: EU:s interna utmaningar          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>\u201dBrexit\u201d, migration och fr\u00e5gan om katalansk sj\u00e4lvst\u00e4ndighet \u00e4r exempel p\u00e5 utmaningar som hotar att rubba status quo inom EU. De&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          19\/03\/2019 18:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            ABF-huset, Sveav\u00e4gen 41          <\/span>\n        \n                  <span class=\"price\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            Fri entr\u00e9\n          <\/span>\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/statsvetare-pratar-politik-eus-interna-utmaningar\/\" data-post-id=\"9772\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-9714 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-samtal\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/190316-helin-turkiet-600x420.jpg'); padding-top: 70%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/190316-helin-turkiet.jpg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/en-kvall-om-turkiet\/\" data-post-id=\"9714\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          Samtal        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/en-kvall-om-turkiet\/\" data-post-id=\"9714\" class=\"open-modal\">\n            En kv\u00e4ll om Turkiet          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>V\u00e4lkommen till ett samtal om boken \u201cMinnesst\u00e4dningen\u201d av Helin Sahin, till vardags Turkietk\u00e4nnare p\u00e5 Palmecentret. Med utg\u00e5ngspunkt i boken leder&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          19\/03\/2019 18:15                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            ABF-huset, Sveav\u00e4gen 41          <\/span>\n        \n                  <span class=\"price\" itemprop=\"price\" content=\"90.00\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            90 kr\n          <\/span>\n          <meta itemprop=\"priceCurrency\" content=\"SEK\">\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/en-kvall-om-turkiet\/\" data-post-id=\"9714\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n              <a href=\"https:\/\/billetto.se\/e\/en-kvall-om-turkiet-biljetter-338959\" class=\"sign-up\" target=\"_blank\">Anm\u00e4l Dig<\/a>\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-10133 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-filmvisning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/03\/franskatisdagar19mars19.jpg'); padding-top: 66.95652173913%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/03\/franskatisdagar19mars19.jpg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/franska-tisdagar-dans-la-brume\/\" data-post-id=\"10133\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          Filmvisning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/franska-tisdagar-dans-la-brume\/\" data-post-id=\"10133\" class=\"open-modal\">\n            Franska tisdagar: Dans La Brume          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>Mathieu v\u00e4grar ge upp kampen f\u00f6r att f\u00e5 ut sin 11-\u00e5riga dotter Sarah fr\u00e5n det hermetiska rummet hon bor i&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          19\/03\/2019 18:30                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            Biograf Zita<br \/>\r          <\/span>\n        \n                  <span class=\"price\" itemprop=\"price\" content=\"100.00\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            100 kr\n          <\/span>\n          <meta itemprop=\"priceCurrency\" content=\"SEK\">\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/franska-tisdagar-dans-la-brume\/\" data-post-id=\"10133\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article><article class=\"card post-9922 type-evenemang status-publish has-post-thumbnail hentry evenemang_kategori-filmvisning\" itemscope itemtype=\"http:\/\/schema.org\/Event\">\n\n  <div class=\"card-inner\">\n\n    <span class=\"post-type\">\n      Evenemang    <\/span>\n\n                <figure style=\"background-image: url('https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/ascenseur-600x338.jpg'); padding-top: 56.333333333333%\" itemprop=\"image\" content=\"https:\/\/abfstockholm.se\/wp-content\/uploads\/2019\/02\/ascenseur.jpg\">\n        <a href=\"https:\/\/abfstockholm.se\/evenemang\/arsta-filmstudio-hiss-till-galgen\/\" data-post-id=\"9922\" class=\"open-modal\"><\/a>\n      <\/figure>\n    \n    <div class=\"card-content\">\n      <div class=\"event-text\">\n        <span class=\"subject\">\n          Filmvisning        <\/span>\n\n        <h3 itemprop=\"name\">\n          <a href=\"https:\/\/abfstockholm.se\/evenemang\/arsta-filmstudio-hiss-till-galgen\/\" data-post-id=\"9922\" class=\"open-modal\">\n            \u00c5rsta Filmstudio: Hiss till galgen          <\/a>\n        <\/h3>\n\n                  <div class=\"desc\" itemprop=\"description\">\n            <p>Den ber\u00f6mda filmmusiken som Miles Davis improviserade, den unga Jeanne Moreau som p\u00e5 natten letar desperat efter sin \u00e4lskare i&#8230;<\/p>\n          <\/div>\n              <\/div>\n\n      <div class=\"event-meta\">\n                  <time>\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z\" \/>\n<\/svg>                                          19\/03\/2019 19:00                <br>\n                                                <\/time>\n        \n                  <span class=\"location\" itemprop=\"location\" itemscope itemtype=\"http:\/\/schema.org\/Place\">\n            <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\" \/>\n<\/svg>            \u00c5rsta Folkets Hus<br \/>\r          <\/span>\n        \n                  <span class=\"price\" itemprop=\"price\" content=\"250.00\">\n            <svg viewBox=\"0 0 24 24\">\n  <path class=\"icon\" d=\"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z\" \/>\n<\/svg>            250 kr\n          <\/span>\n          <meta itemprop=\"priceCurrency\" content=\"SEK\">\n              <\/div>\n    <\/div>\n\n    <div class=\"card-actions\">\n\n      <a href=\"https:\/\/abfstockholm.se\/evenemang\/arsta-filmstudio-hiss-till-galgen\/\" data-post-id=\"9922\" class=\"read-more open-modal\">L\u00e4s Mer<\/a>\n\n      \n    <\/div>\n\n  <\/div>\n\n<\/article>","replace":false,"has_results":true,"has_more_results":true,"queried_posts":false,"filters":{"evenemang_kategori":[{"fields":[{"id":"term-130","name":"taxonomy[evenemang_kategori]","value":130,"label":"Festival","count":0},{"id":"term-74","name":"taxonomy[evenemang_kategori]","value":74,"label":"Filmvisning","count":27},{"id":"term-76","name":"taxonomy[evenemang_kategori]","value":76,"label":"Filosofikaf\u00e9","count":6},{"id":"term-47","name":"taxonomy[evenemang_kategori]","value":47,"label":"F\u00f6rel\u00e4sning","count":55},{"id":"term-94","name":"taxonomy[evenemang_kategori]","value":94,"label":"F\u00f6rest\u00e4llning","count":8},{"id":"term-96","name":"taxonomy[evenemang_kategori]","value":96,"label":"Forum","count":2},{"id":"term-72","name":"taxonomy[evenemang_kategori]","value":72,"label":"Konsert","count":1},{"id":"term-103","name":"taxonomy[evenemang_kategori]","value":103,"label":"Marknad","count":1},{"id":"term-129","name":"taxonomy[evenemang_kategori]","value":129,"label":"Prisutdelning","count":0},{"id":"term-97","name":"taxonomy[evenemang_kategori]","value":97,"label":"Samtal","count":6},{"id":"term-77","name":"taxonomy[evenemang_kategori]","value":77,"label":"Seminarium","count":15},{"id":"term-75","name":"taxonomy[evenemang_kategori]","value":75,"label":"Stadsvandring","count":26},{"id":"term-95","name":"taxonomy[evenemang_kategori]","value":95,"label":"Studiecirkel \/ kurs","count":1},{"id":"term-104","name":"taxonomy[evenemang_kategori]","value":104,"label":"Utbildning","count":0},{"id":"term-73","name":"taxonomy[evenemang_kategori]","value":73,"label":"Utst\u00e4llning","count":1},{"id":"term-133","name":"taxonomy[evenemang_kategori]","value":133,"label":"Workshop","count":1}]}],"time":[{"fields":[{"id":"term-2019-03-15-0000-2019-03-15-2359","name":"calendar_time","value":"2019-03-15 00:00 | 2019-03-15 23:59","label":"Idag","count":0,"disabled":true},{"id":"term-2019-03-15-0000-2019-03-17-2359","name":"calendar_time","value":"2019-03-15 00:00 | 2019-03-17 23:59","label":"Denna vecka","count":4,"disabled":false},{"id":"term-2019-03-15-0000-2019-04-14-2359","name":"calendar_time","value":"2019-03-15 00:00 | 2019-04-14 23:59","label":"Kommande m\u00e5nad","count":94,"disabled":false}]}]}}"""


def get_weird_json_with_no_more_results():
    return r"""{"_query_args":{"post_status":"publish","paged":13,"post_type":["evenemang"]},"success":true,"results":"<h4 class=\"no-results\">Inget hittat.<\/h4>","replace":false,"has_results":false,"has_more_results":false,"queried_posts":false,"filters":{"evenemang_kategori":[{"fields":[{"id":"term-130","name":"taxonomy[evenemang_kategori]","value":130,"label":"Festival","count":0},{"id":"term-74","name":"taxonomy[evenemang_kategori]","value":74,"label":"Filmvisning","count":27},{"id":"term-76","name":"taxonomy[evenemang_kategori]","value":76,"label":"Filosofikaf\u00e9","count":6},{"id":"term-47","name":"taxonomy[evenemang_kategori]","value":47,"label":"F\u00f6rel\u00e4sning","count":53},{"id":"term-94","name":"taxonomy[evenemang_kategori]","value":94,"label":"F\u00f6rest\u00e4llning","count":7},{"id":"term-96","name":"taxonomy[evenemang_kategori]","value":96,"label":"Forum","count":2},{"id":"term-72","name":"taxonomy[evenemang_kategori]","value":72,"label":"Konsert","count":1},{"id":"term-103","name":"taxonomy[evenemang_kategori]","value":103,"label":"Marknad","count":1},{"id":"term-129","name":"taxonomy[evenemang_kategori]","value":129,"label":"Prisutdelning","count":0},{"id":"term-97","name":"taxonomy[evenemang_kategori]","value":97,"label":"Samtal","count":6},{"id":"term-77","name":"taxonomy[evenemang_kategori]","value":77,"label":"Seminarium","count":15},{"id":"term-75","name":"taxonomy[evenemang_kategori]","value":75,"label":"Stadsvandring","count":26},{"id":"term-95","name":"taxonomy[evenemang_kategori]","value":95,"label":"Studiecirkel \/ kurs","count":1},{"id":"term-104","name":"taxonomy[evenemang_kategori]","value":104,"label":"Utbildning","count":0},{"id":"term-73","name":"taxonomy[evenemang_kategori]","value":73,"label":"Utst\u00e4llning","count":1},{"id":"term-133","name":"taxonomy[evenemang_kategori]","value":133,"label":"Workshop","count":1}]}],"time":[{"fields":[{"id":"term-2019-03-17-0000-2019-03-17-2359","name":"calendar_time","value":"2019-03-17 00:00 | 2019-03-17 23:59","label":"Denna vecka","count":0,"disabled":true},{"id":"term-2019-03-17-0000-2019-04-16-2359","name":"calendar_time","value":"2019-03-17 00:00 | 2019-04-16 23:59","label":"Kommande m\u00e5nad","count":95,"disabled":false}]}]}}"""


if __name__ == '__main__':
    try:
        events = get_events()
        for event in (events or []):
            print("Event: " + ''.join(str(event)) + ")")
    except LookupError as le:
        print(le)
